cmake_minimum_required(VERSION 3.9)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -O2")

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_SOURCE_DIR}/cmake)

project(MediaCopier VERSION 1.2.0)

add_subdirectory(src/mediacopier)
add_subdirectory(src/mcp)
add_subdirectory(src/mmv)
add_subdirectory(test)

set(CPACK_PACKAGE_VENDOR "Patrick Ziegler")
set(CPACK_PACKAGE_CONTACT "https://github.com/patrickziegler")

set(CPACK_PACKAGE_NAME "${PROJECT_NAME}")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Copying and renaming media files according to their original creation date with lossless jpeg rotation on the fly")

set(CPACK_PACKAGE_VERSION_MAJOR ${PROJECT_VERSION_MAJOR})
set(CPACK_PACKAGE_VERSION_MINOR ${PROJECT_VERSION_MINOR})
set(CPACK_PACKAGE_VERSION_PATCH ${PROJECT_VERSION_PATCH})

set(CPACK_PACKAGE_INSTALL_DIRECTORY ${CMAKE_INSTALL_PREFIX})

set(CPACK_RESOURCE_FILE_LICENSE "${CMAKE_CURRENT_SOURCE_DIR}/LICENSE")
set(CPACK_RESOURCE_FILE_README "${CMAKE_CURRENT_SOURCE_DIR}/README.md")

set(CPACK_GENERATOR "RPM")

set(CPACK_RPM_PACKAGE_RELEASE 1)
set(CPACK_RPM_COMPONENT_INSTALL OFF)

set(CPACK_RPM_APP_PACKAGE_NAME "${PROJECT_NAME}")
set(CPACK_RPM_HEADERS_PACKAGE_NAME "${PROJECT_NAME}-devel")
set(CPACK_RPM_HEADERS_PACKAGE_REQUIRES "${PROJECT_NAME}")

include(CPack)
